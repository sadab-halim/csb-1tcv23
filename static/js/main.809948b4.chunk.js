(this["webpackJsonpnotion-text-editor"]=this["webpackJsonpnotion-text-editor"]||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},23:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),s=n(10),i=n.n(s),o=n(7),c=n(6),r=n(2),d=n(3),u=n(1),h=n(5),p=n(4),m=(n(9),n(11)),b=n.n(m),g=n(13),k=[{id:"page-title",tag:"h1",label:"Page Title"},{id:"heading",tag:"h2",label:"Heading"},{id:"subheading",tag:"h3",label:"Subheading"},{id:"paragraph",tag:"p",label:"Paragraph"}],f=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).keyDownHandler=a.keyDownHandler.bind(Object(u.a)(a)),a.state={command:"",items:k,selectedItem:0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyDownHandler)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.command;if(t.command!==n){var a=Object(g.a)(k,n,{keys:["tag"]});this.setState({items:a})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDownHandler)}},{key:"keyDownHandler",value:function(e){var t=this.state.items,n=this.state.selectedItem,a=this.state.command;switch(e.key){case"Enter":e.preventDefault(),this.props.onSelect(t[n].tag);break;case"Backspace":a||this.props.close(),this.setState({command:a.substring(0,a.length-1)});break;case"ArrowUp":e.preventDefault();var l=0===n?t.length-1:n-1;this.setState({selectedItem:l});break;case"ArrowDown":case"Tab":e.preventDefault();var s=n===t.length-1?0:n+1;this.setState({selectedItem:s});break;default:this.setState({command:this.state.command+e.key})}}},{key:"render",value:function(){var e=this,t=this.props.position.x,n={top:this.props.position.y-150,left:t};return l.a.createElement("div",{className:"SelectMenu",style:n},l.a.createElement("div",{className:"Items"},this.state.items.map((function(t,n){var a=e.state.selectedItem,s=e.state.items.indexOf(t)===a;return l.a.createElement("div",{className:s?"Selected":null,key:n,role:"button",tabIndex:"0",onClick:function(){return e.props.onSelect(t.tag)}},t.label)}))))}}]),n}(l.a.Component),v=function(e){var t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t),e.focus()},y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onChangeHandler=a.onChangeHandler.bind(Object(u.a)(a)),a.onKeyDownHandler=a.onKeyDownHandler.bind(Object(u.a)(a)),a.onKeyUpHandler=a.onKeyUpHandler.bind(Object(u.a)(a)),a.openSelectMenuHandler=a.openSelectMenuHandler.bind(Object(u.a)(a)),a.closeSelectMenuHandler=a.closeSelectMenuHandler.bind(Object(u.a)(a)),a.tagSelectionHandler=a.tagSelectionHandler.bind(Object(u.a)(a)),a.contentEditable=l.a.createRef(),a.state={htmlBackup:null,html:"",tag:"p",previousKey:"",selectMenuIsOpen:!1,selectMenuPosition:{x:null,y:null}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.setState({html:this.props.html,tag:this.props.tag})}},{key:"componentDidUpdate",value:function(e,t){var n=t.html!==this.state.html,a=t.tag!==this.state.tag;(n||a)&&this.props.updatePage({id:this.props.id,html:this.state.html,tag:this.state.tag})}},{key:"onChangeHandler",value:function(e){this.setState({html:e.target.value})}},{key:"onKeyDownHandler",value:function(e){"/"===e.key&&this.setState({htmlBackup:this.state.html}),"Enter"===e.key&&("Shift"===this.state.previousKey||this.state.selectMenuIsOpen||(e.preventDefault(),this.props.addBlock({id:this.props.id,ref:this.contentEditable.current}))),"Backspace"!==e.key||this.state.html||(e.preventDefault(),this.props.deleteBlock({id:this.props.id,ref:this.contentEditable.current})),this.setState({previousKey:e.key})}},{key:"onKeyUpHandler",value:function(e){"/"===e.key&&this.openSelectMenuHandler()}},{key:"openSelectMenuHandler",value:function(){var e=function(){var e,t;if("undefined"!==typeof window.getSelection){var n=window.getSelection();if(0!==n.rangeCount){var a=n.getRangeAt(0).cloneRange();a.collapse(!1);var l=a.getClientRects()[0];l&&(e=l.left,t=l.top)}}return{x:e,y:t}}(),t=e.x,n=e.y;this.setState({selectMenuIsOpen:!0,selectMenuPosition:{x:t,y:n}}),document.addEventListener("click",this.closeSelectMenuHandler)}},{key:"closeSelectMenuHandler",value:function(){this.setState({htmlBackup:null,selectMenuIsOpen:!1,selectMenuPosition:{x:null,y:null}}),document.removeEventListener("click",this.closeSelectMenuHandler)}},{key:"tagSelectionHandler",value:function(e){var t=this;this.setState({tag:e,html:this.state.htmlBackup},(function(){v(t.contentEditable.current),t.closeSelectMenuHandler()}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.selectMenuIsOpen&&l.a.createElement(f,{position:this.state.selectMenuPosition,onSelect:this.tagSelectionHandler,close:this.closeSelectMenuHandler}),l.a.createElement(b.a,{className:"Block",innerRef:this.contentEditable,html:this.state.html,tagName:this.state.tag,onChange:this.onChangeHandler,onKeyDown:this.onKeyDownHandler,onKeyUp:this.onKeyUpHandler}))}}]),n}(l.a.Component),H=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},S={id:H(),html:"",tag:"p"},O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updatePageHandler=a.updatePageHandler.bind(Object(u.a)(a)),a.addBlockHandler=a.addBlockHandler.bind(Object(u.a)(a)),a.deleteBlockHandler=a.deleteBlockHandler.bind(Object(u.a)(a)),a.state={blocks:[S]},a}return Object(d.a)(n,[{key:"updatePageHandler",value:function(e){var t=this.state.blocks,n=t.map((function(e){return e.id})).indexOf(e.id),a=Object(c.a)(t);a[n]=Object(o.a)(Object(o.a)({},a[n]),{},{tag:e.tag,html:e.html}),this.setState({blocks:a})}},{key:"addBlockHandler",value:function(e){var t={id:H(),html:"",tag:"p"},n=this.state.blocks,a=n.map((function(e){return e.id})).indexOf(e.id),l=Object(c.a)(n);l.splice(a+1,0,t),this.setState({blocks:l},(function(){e.ref.nextElementSibling.focus()}))}},{key:"deleteBlockHandler",value:function(e){var t=e.ref.previousElementSibling;if(t){var n=this.state.blocks,a=n.map((function(e){return e.id})).indexOf(e.id),l=Object(c.a)(n);l.splice(a,1),this.setState({blocks:l},(function(){v(t),t.focus()}))}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"Page"},this.state.blocks.map((function(t,n){return l.a.createElement(y,{key:n,id:t.id,tag:t.tag,html:t.html,updatePage:e.updatePageHandler,addBlock:e.addBlockHandler,deleteBlock:e.deleteBlockHandler})})))}}]),n}(l.a.Component),j=document.getElementById("root");i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement("h1",{className:"Logo"},"notion.clone"),l.a.createElement("p",{className:"Intro"},"Helloo"," ",l.a.createElement("span",{role:"img","aria-label":"greetings",className:"Emoji"},"\ud83d\udc4b")," ","You can add content below. Type ",l.a.createElement("span",{className:"Code"},"/")," to see available elements."),l.a.createElement(O,null)),j)},9:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.809948b4.chunk.js.map